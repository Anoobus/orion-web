@using orion.web.Employees
@using System.Reflection
@using orion.web.ApplicationStartup

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - orion.web</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    
</head>
<body>
    <style>
        #sys-mgmt-dropdown li a {
            color: #FFF;
            font-size: 15px;
        }
    </style>
    @if (User.Identity.IsAuthenticated)
    {
        <ul id="sys-mgmt-dropdown" class="dropdown-content grey darken-3 text-white" style="top:64px">
            <li><a class="waves-effect waves-light text-white" asp-controller="Jobs" asp-action="Index">Jobs</a></li>
            <li><a class="waves-effect waves-light text-white" asp-controller="Task" asp-action="List">Tasks</a></li>
            <li><a class="waves-effect waves-light text-white" asp-controller="Clients" asp-action="ListClients">Clients</a></li>
            <li><a class="waves-effect waves-light text-white" asp-controller="Employee" asp-action="List">Employees</a></li>
            <li><a class="waves-effect waves-light text-white" asp-controller="Jobs" asp-action="Create">Create New Job</a></li>
        </ul>

        <nav class="grey darken-3">
            <div class="nav-wrapper">
                <ul id="nav-mobile" class="">
                    <li class="valign-wrapper"><img src="/images/orion_logo_brand.png" style="height:32px;margin-top:16px"></li>
                    <li><a class="waves-effect waves-light" asp-controller="Home" asp-action="Index">Home</a></li>
                    <li><a class="dropdown-trigger" href="#!" data-target="sys-mgmt-dropdown">System Management <i class="material-icons right">arrow_drop_down</i></a></li>
                    <li><a class="waves-effect waves-light" asp-controller="TimeEntry" asp-action="Index">Time Entry</a></li>
                    <li><a class="waves-effect waves-light" asp-controller="TimeApproval" asp-action="Index">Time Approval</a></li>
                    <li><a class="waves-efect waves-light" asp-controller="Reports" asp-action="Index">View Reports</a></li>
                    @await Html.PartialAsync("_LoginPartial")
                </ul>
            </div>
        </nav>
    }




    <partial name="_CookieConsentPartial" />


    @RenderBody()

    @if (User.Identity.IsAuthenticated)
    {
        <footer>
            <p>
                &copy; 2021 - Pragmatic Software Solutions LLC<br />
                <span style="font-size:8px">@Startup.AppVersion.Value</span>
            </p>
        </footer>

        }

        @*<script type="text/javascript">
                function toastSuccess(data) {
                    $.notify({
                        // options
                        icon: 'glyphicon glyphicon-info-sign',
                        message: data
                    }, {
                            // settings
                            type: 'info',
                            placement: {
                                from: "bottom",
                                align: "center"
                            },
                            offset: 20,
                            spacing: 10,
                            delay: 2000,
                            timer: 700,
                            animate: {
                                enter: 'animated fadeInUp',
                                exit: 'animated fadeOutDown'
                            },
                        });
                }
                function toastError(e) {
                    $.notify({
                        // options
                        message: "couldn't get notifications: " + e.status
                    }, {
                            // settings
                            type: 'error',
                            placement: {
                                from: "bottom",
                                align: "center"
                            },
                            offset: 20,
                            spacing: 10,
                            delay: 2000,
                            timer: 700,
                            animate: {
                                enter: 'animated fadeInUp',
                                exit: 'animated fadeOutDown'
                            },
                        });
                }
                $(document).ready(function () {
                    $.get("/api/Notifications")
                        .done(function (data) {
                            if (Object.keys(data).length !== 0) {
                                toastSuccess(data);
                            }
                        })
                        .fail(function (e) {
                            @if(User.Identity.IsAuthenticated)
                            {
                            <Text>
                            toastError(e);
                            </Text>
                            }
                        });
                });
            </script>*@
        @RenderSection("Scripts", required: false)
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

        <script type="text/javascript">document.addEventListener('DOMContentLoaded', function () {
                var elems = document.querySelectorAll('.dropdown-trigger');
                var instances = M.Dropdown.init(elems, {

                });
            });</script>
    </body>
</html>
